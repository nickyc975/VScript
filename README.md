# VScript

一种动态强类型编程语言，语法类似C语言，采用基于栈的虚拟机。

### 关键字

* 类型

语言支持的基本类型如下：

```
    none, bool, char, int, float, str
```

此语言与Python类似，是动态强类型语言，变量类型在运行时确定，不支持隐式类型转换，后续会添加类型转换关键字。

* 变量/常量/函数声明

```
    var, val, func
```

`var`用于声明变量，`val`用于声明常量，常量声明时必须初始化，之后不可以再次赋值。`func`用于声明函数，函数名也是常量，不可重新赋值。

* 流程控制语句

注意：__所有流程控制语句后接的语句块必须放在大括号内__

```
    if (<条件>) { <语句块> }

    elif (<条件>) { <语句块> }

    else { <语句块> }

    while (<条件>) { <语句块> }

    for (<条件>) { <语句块> }

    return

    break

    continue
```

### 操作符

支持的操作符如下：

```
    + - * / %

    = += -= *= /= %=

    & | ! &= |=

    < > <= >= == !=
```

其中，`+`和`+=`可用于除`none`和`bool`以外的所有类型，包括列表；比较运算符可以用于除列表以外的所有类型。

### 分隔符

```
    , ;

    ( ) [ ] { }
```

### 常量表达式

```
    none: ^none$

    bool: ^(true|false)$

    char: ^\'.\'$

    int: ^-?(\d|[1-9]\d+)$

    float: ^-?(\d|[1-9]\d+)\.\d*$

    string: ^\".+\"$
```

除以上基本类型常量外，还支持定义列表，如：

```
    var array = [none, true, '1', 123, 123.0, "123", [1, 2, 3]];
```

### 标识符

标识符遵循C语言的标识符规范，其正则表达式如下：

```
    ^[A-Za-z_]\w*$
```

### 其他

* 内存管理：目前实现了极其简单的引用计数，只能管理基本类型的值，并且没有循环引用检查；

* 错误处理：目前错误处理基本残废，如果代码出错大部分情况下都是直接崩溃；

### 待实现

* 更加完善的内存管理，在不考虑循环引用的情况下可以避免内存泄露；

* 更加健壮的错误处理；

* 结构体/类的支持；

* 对其他源文件的符号引用(import)；
